---
swagger: '2.0'
info:
  title: API V1
  version: v1
securityDefinitions:
  Bearer:
    description: "..."
    type: apiKey
    name: Authorization
    in: header
paths:
  "/api/v1/auth/register":
    post:
      summary: Register a new user
      tags:
      - Authentication
      consumes:
      - application/json
      produces:
      - application/json
      parameters:
      - name: user
        in: body
        schema:
          type: object
          properties:
            user:
              type: object
              properties:
                email:
                  type: string
                  format: email
                password:
                  type: string
                  minLength: 6
                password_confirmation:
                  type: string
                  minLength: 6
              required:
              - email
              - password
              - password_confirmation
          required:
          - user
      responses:
        '201':
          description: user created
          schema:
            type: object
            properties:
              message:
                type: string
              user:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                  email:
                    type: string
                    format: email
                  created_at:
                    type: string
                    format: date-time
                  updated_at:
                    type: string
                    format: date-time
        '422':
          description: unprocessable entity
          schema:
            type: object
            properties:
              errors:
                type: array
                items:
                  type: string
  "/api/v1/categories":
    get:
      summary: List categories
      tags:
      - Categories
      produces:
      - application/json
      security:
      - Bearer: {}
      parameters:
      - name: page
        in: query
        type: integer
        required: false
        description: Page number
      - name: per_page
        in: query
        type: integer
        required: false
        description: Items per page
      - name: q[name_cont]
        in: query
        type: string
        required: false
        description: Search categories where name contains the given string
      - name: q[publish_eq]
        in: query
        type: boolean
        required: false
        description: Filter categories by publish status (true/false)
      - name: q[s]
        in: query
        type: string
        required: false
        description: Sort results (name asc, name desc, created_at desc, etc.)
      responses:
        '200':
          description: successful with publish filter
          schema:
            type: object
            properties:
              meta:
                type: object
                properties:
                  per_page:
                    type: integer
                  current_page:
                    type: integer
                  next_page:
                    type: integer
                    nullable: true
                  prev_page:
                    type: integer
                    nullable: true
                  total_page:
                    type: integer
                  total_data:
                    type: integer
              data:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: string
                      format: uuid
                    name:
                      type: string
                    publish:
                      type: boolean
                    created_at:
                      type: string
                      format: date-time
                    updated_at:
                      type: string
                      format: date-time
                  required:
                  - id
                  - name
                  - publish
                  - created_at
                  - updated_at
        '401':
          description: unauthorized
    post:
      summary: Create category
      tags:
      - Categories
      consumes:
      - application/json
      produces:
      - application/json
      security:
      - Bearer: {}
      parameters:
      - name: category
        in: body
        schema:
          type: object
          properties:
            category:
              type: object
              properties:
                name:
                  type: string
                publish:
                  type: boolean
              required:
              - name
          required:
          - category
      responses:
        '201':
          description: category created
          schema:
            type: object
            properties:
              id:
                type: string
                format: uuid
              name:
                type: string
              publish:
                type: boolean
              created_at:
                type: string
                format: date-time
              updated_at:
                type: string
                format: date-time
            required:
            - id
            - name
            - publish
            - created_at
            - updated_at
        '422':
          description: unprocessable entity
          schema:
            type: object
            properties:
              errors:
                type: object
                properties:
                  name:
                    type: array
                    items:
                      type: string
        '401':
          description: unauthorized
  "/api/v1/categories/{id}":
    parameters:
    - name: id
      in: path
      type: string
      format: uuid
      description: Category ID
      required: true
    get:
      summary: Show category
      tags:
      - Categories
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: successful
          schema:
            type: object
            properties:
              id:
                type: string
                format: uuid
              name:
                type: string
              publish:
                type: boolean
              created_at:
                type: string
                format: date-time
              updated_at:
                type: string
                format: date-time
            required:
            - id
            - name
            - publish
            - created_at
            - updated_at
        '404':
          description: not found
        '401':
          description: unauthorized
    patch:
      summary: Update category
      tags:
      - Categories
      consumes:
      - application/json
      produces:
      - application/json
      security:
      - Bearer: {}
      parameters:
      - name: category
        in: body
        schema:
          type: object
          properties:
            category:
              type: object
              properties:
                name:
                  type: string
                publish:
                  type: boolean
          required:
          - category
      responses:
        '200':
          description: category updated
          schema:
            type: object
            properties:
              id:
                type: string
                format: uuid
              name:
                type: string
              publish:
                type: boolean
              created_at:
                type: string
                format: date-time
              updated_at:
                type: string
                format: date-time
            required:
            - id
            - name
            - publish
            - created_at
            - updated_at
        '422':
          description: unprocessable entity
          schema:
            type: object
            properties:
              errors:
                type: object
                properties:
                  name:
                    type: array
                    items:
                      type: string
        '401':
          description: unauthorized
        '404':
          description: not found
    put:
      summary: Update category
      tags:
      - Categories
      consumes:
      - application/json
      produces:
      - application/json
      security:
      - Bearer: {}
      parameters:
      - name: category
        in: body
        schema:
          type: object
          properties:
            category:
              type: object
              properties:
                name:
                  type: string
                publish:
                  type: boolean
              required:
              - name
          required:
          - category
      responses:
        '200':
          description: category updated
          schema:
            type: object
            properties:
              id:
                type: string
                format: uuid
              name:
                type: string
              publish:
                type: boolean
              created_at:
                type: string
                format: date-time
              updated_at:
                type: string
                format: date-time
            required:
            - id
            - name
            - publish
            - created_at
            - updated_at
    delete:
      summary: Delete category
      tags:
      - Categories
      security:
      - Bearer: {}
      responses:
        '204':
          description: no content
        '404':
          description: not found
        '401':
          description: unauthorized
  "/api/v1/products":
    get:
      summary: List products
      tags:
      - Products
      produces:
      - application/json
      security:
      - Bearer: {}
      parameters:
      - name: page
        in: query
        type: integer
        required: false
        description: Page number
      - name: per_page
        in: query
        type: integer
        required: false
        description: Items per page
      - name: q[name_cont]
        in: query
        type: string
        required: false
        description: Search products where name contains the given string
      - name: q[publish_eq]
        in: query
        type: boolean
        required: false
        description: Filter products by publish status (true/false)
      - name: q[s]
        in: query
        type: string
        required: false
        description: Sort results (name asc, name desc, created_at desc, etc.)
      responses:
        '200':
          description: successful with publish filter
          schema:
            type: object
            properties:
              meta:
                type: object
                properties:
                  per_page:
                    type: integer
                  current_page:
                    type: integer
                  next_page:
                    type: integer
                    nullable: true
                  prev_page:
                    type: integer
                    nullable: true
                  total_page:
                    type: integer
                  total_data:
                    type: integer
              data:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: string
                      format: uuid
                    name:
                      type: string
                    publish:
                      type: boolean
                    category:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                        name:
                          type: string
                    category_id:
                      type: string
                      format: uuid
                    created_at:
                      type: string
                      format: date-time
                    updated_at:
                      type: string
                      format: date-time
                  required:
                  - id
                  - name
                  - publish
                  - category_id
                  - created_at
                  - updated_at
        '401':
          description: unauthorized
    post:
      summary: Create product
      tags:
      - Products
      consumes:
      - application/json
      produces:
      - application/json
      security:
      - Bearer: {}
      parameters:
      - name: product
        in: body
        schema:
          type: object
          properties:
            product:
              type: object
              properties:
                name:
                  type: string
                publish:
                  type: boolean
                category_id:
                  type: string
                  format: uuid
              required:
              - name
          required:
          - product
      responses:
        '201':
          description: product created
          schema:
            type: object
            properties:
              id:
                type: string
                format: uuid
              name:
                type: string
              publish:
                type: boolean
              category_id:
                type: string
                format: uuid
              created_at:
                type: string
                format: date-time
              updated_at:
                type: string
                format: date-time
            required:
            - id
            - name
            - publish
            - category_id
            - created_at
            - updated_at
        '422':
          description: unprocessable entity
          schema:
            type: object
            properties:
              errors:
                type: object
                properties:
                  name:
                    type: array
                    items:
                      type: string
        '401':
          description: unauthorized
  "/api/v1/products/{id}":
    parameters:
    - name: id
      in: path
      type: string
      format: uuid
      description: Product ID
      required: true
    get:
      summary: Show product
      tags:
      - Products
      produces:
      - application/json
      security:
      - Bearer: {}
      responses:
        '200':
          description: successful
          schema:
            type: object
            properties:
              id:
                type: string
                format: uuid
              name:
                type: string
              publish:
                type: boolean
              category:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                  name:
                    type: string
              category_id:
                type: string
                format: uuid
              created_at:
                type: string
                format: date-time
              updated_at:
                type: string
                format: date-time
            required:
            - id
            - name
            - publish
            - category_id
            - created_at
            - updated_at
        '404':
          description: not found
        '401':
          description: unauthorized
    patch:
      summary: Update product
      tags:
      - Products
      consumes:
      - application/json
      produces:
      - application/json
      security:
      - Bearer: {}
      parameters:
      - name: product
        in: body
        schema:
          type: object
          properties:
            product:
              type: object
              properties:
                name:
                  type: string
                publish:
                  type: boolean
                category_id:
                  type: string
                  format: uuid
          required:
          - product
      responses:
        '200':
          description: product updated
          schema:
            type: object
            properties:
              id:
                type: string
                format: uuid
              name:
                type: string
              publish:
                type: boolean
              category_id:
                type: string
                format: uuid
              created_at:
                type: string
                format: date-time
              updated_at:
                type: string
                format: date-time
            required:
            - id
            - name
            - publish
            - category_id
            - created_at
            - updated_at
        '422':
          description: unprocessable entity
          schema:
            type: object
            properties:
              errors:
                type: object
                properties:
                  name:
                    type: array
                    items:
                      type: string
        '401':
          description: unauthorized
        '404':
          description: not found
    put:
      summary: Update product
      tags:
      - Products
      consumes:
      - application/json
      produces:
      - application/json
      security:
      - Bearer: {}
      parameters:
      - name: product
        in: body
        schema:
          type: object
          properties:
            product:
              type: object
              properties:
                name:
                  type: string
                publish:
                  type: boolean
                category_id:
                  type: string
                  format: uuid
              required:
              - name
          required:
          - product
      responses:
        '200':
          description: product updated
          schema:
            type: object
            properties:
              id:
                type: string
                format: uuid
              name:
                type: string
              publish:
                type: boolean
              category_id:
                type: string
                format: uuid
              created_at:
                type: string
                format: date-time
              updated_at:
                type: string
                format: date-time
            required:
            - id
            - name
            - publish
            - category_id
            - created_at
            - updated_at
    delete:
      summary: Delete product
      tags:
      - Products
      security:
      - Bearer: {}
      responses:
        '204':
          description: no content
        '404':
          description: not found
        '401':
          description: unauthorized
  "/oauth/token/issue":
    post:
      summary: Issue Token
      tags:
      - Authentication
      consumes:
      - application/x-www-form-urlencoded
      produces:
      - application/json
      parameters:
      - name: grant_type
        in: formData
        type: string
        required: true
        enum:
        - password
      - name: email
        in: formData
        type: string
        required: true
      - name: password
        in: formData
        type: string
        required: true
      - name: client_id
        in: formData
        type: string
        required: true
        default: Aptt8Gz77Jc-R4x6wEMgF6z2VindtgAONBp4UsTDvOc
      - name: client_secret
        in: formData
        type: string
        required: true
        default: my885L3cwCVms_d1oWg3h8NPb6wftuBUF9lIga5QuA8
      responses:
        '200':
          description: token issued
          schema:
            type: object
            properties:
              access_token:
                type: string
              token_type:
                type: string
                enum:
                - Bearer
              expires_in:
                type: integer
              refresh_token:
                type: string
              scope:
                type: string
              created_at:
                type: integer
        '401':
          description: unauthorized
          schema:
            type: object
            properties:
              error:
                type: string
              error_description:
                type: string
  "/oauth/revoke":
    post:
      summary: Revoke Token
      tags:
      - Authentication
      consumes:
      - application/x-www-form-urlencoded
      produces:
      - application/json
      parameters:
      - name: token
        in: formData
        type: string
        required: true
      - name: client_id
        in: formData
        type: string
        required: false
        default: Aptt8Gz77Jc-R4x6wEMgF6z2VindtgAONBp4UsTDvOc
      - name: client_secret
        in: formData
        type: string
        required: false
        default: my885L3cwCVms_d1oWg3h8NPb6wftuBUF9lIga5QuA8
      responses:
        '200':
          description: token revoked
          schema:
            type: object
            properties: {}
        '403':
          description: forbidden
          schema:
            type: object
            properties:
              error:
                type: string
              error_description:
                type: string
  "/oauth/token/refresh":
    post:
      summary: Refresh Token
      tags:
      - Authentication
      consumes:
      - application/x-www-form-urlencoded
      produces:
      - application/json
      parameters:
      - name: grant_type
        in: formData
        type: string
        required: true
        enum:
        - refresh_token
      - name: refresh_token
        in: formData
        type: string
        required: true
      - name: client_id
        in: formData
        type: string
        required: true
        default: Aptt8Gz77Jc-R4x6wEMgF6z2VindtgAONBp4UsTDvOc
      - name: client_secret
        in: formData
        type: string
        required: true
        default: my885L3cwCVms_d1oWg3h8NPb6wftuBUF9lIga5QuA8
      responses:
        '200':
          description: token refreshed
          schema:
            type: object
            properties:
              access_token:
                type: string
              token_type:
                type: string
                enum:
                - Bearer
              expires_in:
                type: integer
              refresh_token:
                type: string
              scope:
                type: string
              created_at:
                type: integer
        '401':
          description: unauthorized
          schema:
            type: object
            properties:
              error:
                type: string
              error_description:
                type: string
servers:
- url: https://{defaultHost}
  variables:
    defaultHost:
      default: www.example.com
